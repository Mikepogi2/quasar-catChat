import{c as Q,a as b,h as m,b as H,g as R,W as I,i as Y,e as V,l as J,r as F,s as E,w as D,o as U,v as K,x as G,z as Z,m as ee,u as te,B as k,C as B,D as C,K as ne,F as x,H as ae,I as re,G as oe,J as N,P as se,R as ie,S as ue,E as W,X as le,Q as ce}from"./index.b2481834.js";import{u as de,a as me,Q as fe}from"./QPage.f3acaee1.js";import{Q as he}from"./QInput.349dc140.js";import{Q as ve}from"./QToolbar.8900b291.js";import{Q as ge}from"./QResizeObserver.0325d6da.js";var ye=Q({name:"QBanner",props:{...de,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:n}){const{proxy:{$q:t}}=R(),r=me(e,t),a=b(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(r.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),i=b(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const s=[m("div",{class:"q-banner__avatar col-auto row items-center self-start"},H(n.avatar)),m("div",{class:"q-banner__content col text-body2"},H(n.default))],o=H(n.action);return o!==void 0&&s.push(m("div",{class:i.value},o)),m("div",{class:a.value+(e.inlineActions===!1&&o!==void 0?" q-banner--top-padding":""),role:"alert"},s)}}}),be=Q({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:n}){const t=b(()=>e.sent===!0?"sent":"received"),r=b(()=>`q-message-text-content q-message-text-content--${t.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),a=b(()=>`q-message-text q-message-text--${t.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),i=b(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),s=b(()=>e.size!==void 0?`col-${e.size}`:""),o=b(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function f(c){return n.stamp!==void 0?[c,m("div",{class:"q-message-stamp"},n.stamp())]:e.stamp?[c,m("div",{class:"q-message-stamp",[o.value.stamp]:e.stamp})]:[c]}function l(c,v){const d=v===!0?c.length>1?g=>g:g=>m("div",[g]):g=>m("div",{[o.value.msg]:g});return c.map((g,P)=>m("div",{key:P,class:a.value},[m("div",{class:r.value},f(d(g)))]))}return()=>{const c=[];n.avatar!==void 0?c.push(n.avatar()):e.avatar!==void 0&&c.push(m("img",{class:`q-message-avatar q-message-avatar--${t.value}`,src:e.avatar,"aria-hidden":"true"}));const v=[];n.name!==void 0?v.push(m("div",{class:`q-message-name q-message-name--${t.value}`},n.name())):e.name!==void 0&&v.push(m("div",{class:`q-message-name q-message-name--${t.value}`,[o.value.name]:e.name})),n.default!==void 0?v.push(l(I(n.default()),!0)):e.text!==void 0&&v.push(l(e.text)),c.push(m("div",{class:s.value},v));const d=[];return n.label!==void 0?d.push(m("div",{class:"q-message-label"},n.label())):e.label!==void 0&&d.push(m("div",{class:"q-message-label",[o.value.label]:e.label})),d.push(m("div",{class:i.value},c)),m("div",{class:`q-message q-message-${t.value}`},d)}}}),we=Q({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:n,emit:t}){const{proxy:{$q:r}}=R(),a=Y(J,V);if(a===V)return console.error("QFooter needs to be child of QLayout"),V;const i=F(parseInt(e.heightHint,10)),s=F(!0),o=F(E.value===!0||a.isContainer.value===!0?0:window.innerHeight),f=b(()=>e.reveal===!0||a.view.value.indexOf("F")!==-1||r.platform.is.ios&&a.isContainer.value===!0),l=b(()=>a.isContainer.value===!0?a.containerHeight.value:o.value),c=b(()=>{if(e.modelValue!==!0)return 0;if(f.value===!0)return s.value===!0?i.value:0;const u=a.scroll.value.position+l.value+i.value-a.height.value;return u>0?u:0}),v=b(()=>e.modelValue!==!0||f.value===!0&&s.value!==!0),d=b(()=>e.modelValue===!0&&v.value===!0&&e.reveal===!0),g=b(()=>"q-footer q-layout__section--marginal "+(f.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(v.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(f.value!==!0?" hidden":""):"")),P=b(()=>{const u=a.rows.value.bottom,M={};return u[0]==="l"&&a.left.space===!0&&(M[r.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),u[2]==="r"&&a.right.space===!0&&(M[r.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),M});function w(u,M){a.update("footer",u,M)}function y(u,M){u.value!==M&&(u.value=M)}function S({height:u}){y(i,u),w("size",u)}function X(){if(e.reveal!==!0)return;const{direction:u,position:M,inflectionPoint:L}=a.scroll.value;y(s,u==="up"||M-L<100||a.height.value-l.value-M-i.value<300)}function $(u){d.value===!0&&y(s,!0),t("focusin",u)}D(()=>e.modelValue,u=>{w("space",u),y(s,!0),a.animate()}),D(c,u=>{w("offset",u)}),D(()=>e.reveal,u=>{u===!1&&y(s,e.modelValue)}),D(s,u=>{a.animate(),t("reveal",u)}),D([i,a.scroll,a.height],X),D(()=>r.screen.height,u=>{a.isContainer.value!==!0&&y(o,u)});const j={};return a.instances.footer=j,e.modelValue===!0&&w("size",i.value),w("space",e.modelValue),w("offset",c.value),U(()=>{a.instances.footer===j&&(a.instances.footer=void 0,w("size",0),w("offset",0),w("space",!1))}),()=>{const u=K(n.default,[m(ge,{debounce:0,onResize:S})]);return e.elevated===!0&&u.push(m("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),m("footer",{class:g.value,style:P.value,onFocusin:$},u)}}});function h(e){const n=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&n==="[object Date]"?new e.constructor(+e):typeof e=="number"||n==="[object Number]"||typeof e=="string"||n==="[object String]"?new Date(e):new Date(NaN)}const p=43200,O=1440;let Me={};function xe(){return Me}function A(e){const n=h(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function T(e,n){const t=h(e),r=h(n),a=t.getTime()-r.getTime();return a<0?-1:a>0?1:a}function De(e,n){const t=h(e),r=h(n),a=t.getFullYear()-r.getFullYear(),i=t.getMonth()-r.getMonth();return a*12+i}function Pe(e){return n=>{const r=(e?Math[e]:Math.trunc)(n);return r===0?0:r}}function Se(e,n){return+h(e)-+h(n)}function Ce(e){const n=h(e);return n.setHours(23,59,59,999),n}function _e(e){const n=h(e),t=n.getMonth();return n.setFullYear(n.getFullYear(),t+1,0),n.setHours(23,59,59,999),n}function qe(e){const n=h(e);return+Ce(n)==+_e(n)}function ke(e,n){const t=h(e),r=h(n),a=T(t,r),i=Math.abs(De(t,r));let s;if(i<1)s=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-a*i);let o=T(t,r)===-a;qe(h(e))&&i===1&&T(e,r)===1&&(o=!1),s=a*(i-Number(o))}return s===0?0:s}function We(e,n,t){const r=Se(e,n)/1e3;return Pe(t==null?void 0:t.roundingMethod)(r)}const pe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Fe=(e,n,t)=>{let r;const a=pe[e];return typeof a=="string"?r=a:n===1?r=a.one:r=a.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function z(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const Te={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},He={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ve={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Be={date:z({formats:Te,defaultWidth:"full"}),time:z({formats:He,defaultWidth:"full"}),dateTime:z({formats:Ve,defaultWidth:"full"})},ze={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Qe=(e,n,t,r)=>ze[e];function _(e){return(n,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,o=t!=null&&t.width?String(t.width):s;a=e.formattingValues[o]||e.formattingValues[s]}else{const s=e.defaultWidth,o=t!=null&&t.width?String(t.width):e.defaultWidth;a=e.values[o]||e.values[s]}const i=e.argumentCallback?e.argumentCallback(n):n;return a[i]}}const je={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Oe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ae={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Re={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Xe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$e=(e,n)=>{const t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Le={ordinalNumber:$e,era:_({values:je,defaultWidth:"wide"}),quarter:_({values:Ne,defaultWidth:"wide",argumentCallback:e=>e-1}),month:_({values:Oe,defaultWidth:"wide"}),day:_({values:Ae,defaultWidth:"wide"}),dayPeriod:_({values:Re,defaultWidth:"wide",formattingValues:Xe,defaultFormattingWidth:"wide"})};function q(e){return(n,t={})=>{const r=t.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=n.match(a);if(!i)return null;const s=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],f=Array.isArray(o)?Ye(o,v=>v.test(s)):Ie(o,v=>v.test(s));let l;l=e.valueCallback?e.valueCallback(f):f,l=t.valueCallback?t.valueCallback(l):l;const c=n.slice(s.length);return{value:l,rest:c}}}function Ie(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function Ye(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function Je(e){return(n,t={})=>{const r=n.match(e.matchPattern);if(!r)return null;const a=r[0],i=n.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];s=t.valueCallback?t.valueCallback(s):s;const o=n.slice(a.length);return{value:s,rest:o}}}const Ee=/^(\d+)(th|st|nd|rd)?/i,Ue=/\d+/i,Ke={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ge={any:[/^b/i,/^(a|c)/i]},Ze={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},et={any:[/1/i,/2/i,/3/i,/4/i]},tt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},at={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ot={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},st={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},it={ordinalNumber:Je({matchPattern:Ee,parsePattern:Ue,valueCallback:e=>parseInt(e,10)}),era:q({matchPatterns:Ke,defaultMatchWidth:"wide",parsePatterns:Ge,defaultParseWidth:"any"}),quarter:q({matchPatterns:Ze,defaultMatchWidth:"wide",parsePatterns:et,defaultParseWidth:"any",valueCallback:e=>e+1}),month:q({matchPatterns:tt,defaultMatchWidth:"wide",parsePatterns:nt,defaultParseWidth:"any"}),day:q({matchPatterns:at,defaultMatchWidth:"wide",parsePatterns:rt,defaultParseWidth:"any"}),dayPeriod:q({matchPatterns:ot,defaultMatchWidth:"any",parsePatterns:st,defaultParseWidth:"any"})},ut={code:"en-US",formatDistance:Fe,formatLong:Be,formatRelative:Qe,localize:Le,match:it,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lt(e,n,t){var P,w;const r=xe(),a=(w=(P=t==null?void 0:t.locale)!=null?P:r.locale)!=null?w:ut,i=2520,s=T(e,n);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:s});let f,l;s>0?(f=h(n),l=h(e)):(f=h(e),l=h(n));const c=We(l,f),v=(A(l)-A(f))/1e3,d=Math.round((c-v)/60);let g;if(d<2)return t!=null&&t.includeSeconds?c<5?a.formatDistance("lessThanXSeconds",5,o):c<10?a.formatDistance("lessThanXSeconds",10,o):c<20?a.formatDistance("lessThanXSeconds",20,o):c<40?a.formatDistance("halfAMinute",0,o):c<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):d===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",d,o);if(d<45)return a.formatDistance("xMinutes",d,o);if(d<90)return a.formatDistance("aboutXHours",1,o);if(d<O){const y=Math.round(d/60);return a.formatDistance("aboutXHours",y,o)}else{if(d<i)return a.formatDistance("xDays",1,o);if(d<p){const y=Math.round(d/O);return a.formatDistance("xDays",y,o)}else if(d<p*2)return g=Math.round(d/p),a.formatDistance("aboutXMonths",g,o)}if(g=ke(l,f),g<12){const y=Math.round(d/p);return a.formatDistance("xMonths",y,o)}else{const y=g%12,S=Math.trunc(g/12);return y<3?a.formatDistance("aboutXYears",S,o):y<9?a.formatDistance("overXYears",S,o):a.formatDistance("almostXYears",S+1,o)}}const ct={class:"q-pa-md column col justify-end"},dt={style:{width:"100%","max-width":"1560px"}},yt={__name:"ChatPage",setup(e){const n=G(),t=Z(),r=F(null),a=o=>lt(new Date(o),new Date,{addSuffix:!0}),i=()=>{ne(()=>{if(r.value){const o=r.value.$el||r.value;o.scrollTop=o.scrollHeight}})},s=()=>{t.sendMessage(n),i()};return ee(()=>{t.getMessages(n),i()}),te(()=>{t.stopGetMessages()}),D(()=>t.messages,(o,f)=>{o.length!==f.length&&i()},{deep:!0}),(o,f)=>(k(),B(fe,{class:"flex column border",ref_key:"pageChat",ref:r},{default:C(()=>[x(t).isOffline?(k(),B(ye,{key:0,class:"text-white bg-grey-6 text-center"},{default:C(()=>[ae(re(x(t).other)+" is offline. ",1)]),_:1})):oe("",!0),N("div",ct,[N("div",dt,[(k(!0),se(ue,null,ie(x(t).messages,l=>(k(),B(be,{key:l.id,name:l.from==="me"?x(t).userDetails.name:x(t).other,avatar:"https://cdn.quasar.dev/img/avatar4.jpg",text:[l.text],stamp:a(l.timestamp),sent:l.from==="me"},null,8,["name","text","stamp","sent"]))),128))])]),W(we,{elevated:""},{default:C(()=>[W(ve,{class:"flex justify-center"},{default:C(()=>[W(he,{onKeydown:le(s,["enter"]),outlined:"",rounded:"",placeholder:"Name","bg-color":"white",dense:"",modelValue:x(t).text,"onUpdate:modelValue":f[0]||(f[0]=l=>x(t).text=l),required:"",style:{width:"100%","max-width":"900px"}},{after:C(()=>[W(ce,{round:"",dense:"",flat:"",icon:"send",color:"white",onClick:s})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},512))}};export{yt as default};
